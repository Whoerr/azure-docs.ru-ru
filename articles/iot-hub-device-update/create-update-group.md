---
title: Создание группы устройств в обновлении устройства для центра Интернета вещей Azure | Документация Майкрософт
description: Создание группы устройств в обновлении устройства для центра Интернета вещей Azure
author: vimeht
ms.author: vimeht
ms.date: 2/17/2021
ms.topic: how-to
ms.service: iot-hub-device-update
ms.openlocfilehash: a0894047db1ed7687a1a0f5f87fc4020ddf7c694
ms.sourcegitcommit: b4647f06c0953435af3cb24baaf6d15a5a761a9c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/02/2021
ms.locfileid: "101680030"
---
# <a name="create-device-groups-in-device-update-for-iot-hub"></a>Создание групп устройств в обновлении устройства для центра Интернета вещей
Обновление устройства для центра Интернета вещей позволяет развертывать обновления для группы устройств IoT.

## <a name="prerequisites"></a>Предварительные требования

* [Доступ к центру Интернета вещей с включенным обновлением устройства для центра Интернета вещей](create-device-update-account.md). Для центра Интернета вещей рекомендуется использовать уровень S1 (стандартный) или выше. 
* Устройство IoT (или симулятор), подготовленное для обновления устройства в центре Интернета вещей.
* [Для подготовленного устройства успешно импортировано по крайней мере одно обновление.](import-update.md)

## <a name="add-a-tag-to-your-devices"></a>Добавление тега на устройства  

Обновление устройства для центра Интернета вещей позволяет развертывать обновления для группы устройств IoT. Чтобы создать группу, первым делом нужно добавить тег в целевой набор устройств в центре Интернета вещей. Теги можно успешно добавить на устройство только после его подключения к обновлению устройства.

В приведенной ниже документации описано, как добавить и обновить тег.

### <a name="programmatically-update-device-twin"></a>Программное обновление Двойникаа устройства

Вы можете обновить двойника устройства с помощью соответствующего тега, используя RegistryManager после регистрации устройства в обновлении устройства. 
[Узнайте, как добавлять теги с помощью примера приложения .NET.](../iot-hub/iot-hub-csharp-csharp-twin-getstarted.md)  
[Сведения о свойствах тегов](../iot-hub/iot-hub-devguide-device-twins.md#tags-and-properties-format).

#### <a name="device-update-tag-format"></a>Формат тегов обновления устройства

```markdown
     "tags": {
              "ADUGroup": "<CustomTagValue>"
             }
```

### <a name="using-jobs"></a>Использование заданий

Можно запланировать задание на нескольких устройствах, чтобы добавить или обновить тег обновления устройства, следуя [этим](../iot-hub/iot-hub-devguide-jobs.md) примерам. [Подробнее.](../iot-hub/iot-hub-csharp-csharp-schedule-jobs.md)

  > [!NOTE] 
  > Это действие выполняется с учетом текущей квоты сообщений центра Интернета вещей. Мы рекомендуем изменить только теги двойникаа устройства до 50 000. в противном случае вам может потребоваться купить дополнительные единицы центра Интернета вещей, если вы превысили ежедневную квоту на сообщения центра Интернета вещей. Подробные сведения можно найти по [квотам и регулированию](../iot-hub/iot-hub-devguide-quotas-throttling.md#quotas-and-throttling).

### <a name="direct-twin-updates"></a>Прямые обновления двойника

Теги также можно добавлять или обновлять непосредственно в двойникаах устройств.

1. Войдите в [портал Azure](https://portal.azure.com) и перейдите в центр Интернета вещей.

2. С "устройства IoT" или "IoT Edge" в левой области навигации найдите ваше устройство IoT и перейдите к Двойникау устройства.

3. В Двойникае устройства удалите все существующие значения тега обновления устройства, задав для них значение null.

4. Добавьте новое значение тега обновления устройства, как показано ниже. [Пример документа JSON двойникаа устройства с тегами.](../iot-hub/iot-hub-devguide-device-twins.md#device-twins)

```JSON
    "tags": {
            "ADUGroup": "<CustomTagValue>"
            }
```

### <a name="limitations"></a>Ограничения

* Вы можете добавить любое значение в тег, за исключением "без категорий", которое является зарезервированным значением.
* Длина значения тега не может превышать 255 символов.
* Значение тега может содержать буквенно-цифровые символы и следующие специальные символы: ".", "-", "_", "~".
* В именах тегов и групп учитывается регистр.
* Устройство может иметь только один тег с именем Адуграуп. все последующие добавления тега с таким именем будут переопределять существующее значение для имени тега Адуграуп.
* Одно устройство может принадлежать только одной группе.

## <a name="create-a-device-group-by-selecting-an-existing-iot-hub-tag"></a>Создание группы устройств путем выбора существующего тега центра Интернета вещей

1. Перейдите на [портал Microsoft Azure](https://portal.azure.com).

2. Выберите центр Интернета вещей, который вы ранее подключились к экземпляру обновления устройства.

3. Выберите пункт обновления устройства в разделе Автоматическое управление устройствами на панели навигации слева.

4. Выберите вкладку группы в верхней части страницы. Вы увидите число устройств, подключенных к обновлению устройства, которые еще не сгруппированы.
   :::image type="content" source="media/create-update-group/ungrouped-devices.png" alt-text="Снимок экрана несгруппированных устройств." lightbox="media/create-update-group/ungrouped-devices.png":::

5. Нажмите кнопку Добавить, чтобы создать новую группу.
   :::image type="content" source="media/create-update-group/add-group.png" alt-text="Снимок экрана добавления группы устройств." lightbox="media/create-update-group/add-group.png":::

6. Выберите в списке тег центра Интернета вещей и щелкните Создать группу обновлений.
   :::image type="content" source="media/create-update-group/select-tag.png" alt-text="Снимок экрана выбора тега." lightbox="media/create-update-group/select-tag.png":::

7. После создания группы вы увидите, что список диаграмма соответствия обновлений и группы обновлен.  На диаграмме соответствия обновлений отображается число устройств в различных состояниях соответствия: при последнем обновлении доступны новые обновления, выполняющиеся обновления, а также устройства, которые еще не сгруппированы. [Узнайте о соответствии обновлений требованиям.](device-update-compliance.md) 
    :::image type="content" source="media/create-update-group/updated-view.png" alt-text="Снимок экрана представления &quot;соответствие обновлений&quot;." lightbox="media/create-update-group/updated-view.png":::

8. Вы должны увидеть только что созданную группу и все доступные обновления для устройств в новой группе. Вы можете развернуть обновление в новой группе из этого представления, щелкнув имя обновления. Дополнительные сведения см. в статье дальнейшие действия. Развертывание обновления.

## <a name="view-device-details-for-the-group-you-created"></a>Просмотр сведений об устройстве для созданной группы

1. Перейдите к только что созданной группе и щелкните имя группы.

2. Список устройств, входящих в группу, будет отображаться вместе со свойствами обновления устройства. В этом представлении можно также просмотреть сведения о соответствии обновлений для всех устройств, входящих в группу. Диаграмма соответствия обновлений отображает число устройств в различных состояниях соответствия: при последнем обновлении доступны новые обновления и выполняется обновление.
   :::image type="content" source="media/create-update-group/group-details.png" alt-text="Снимок экрана с представлением сведений о группе устройств." lightbox="media/create-update-group/group-details.png":::

3. Можно также щелкнуть каждое отдельное устройство в группе, чтобы перенаправить страницу сведений об устройстве в центре Интернета вещей.
   :::image type="content" source="media/create-update-group/device-details.png" alt-text="Снимок экрана с представлением сведений об устройстве." lightbox="media/create-update-group/device-details.png":::

## <a name="next-steps"></a>Next Steps 

[Развертывание обновления](deploy-update.md)

[Дополнительные сведения о группах устройств](device-update-groups.md)

[Узнайте о соответствии обновлений требованиям.](device-update-compliance.md)

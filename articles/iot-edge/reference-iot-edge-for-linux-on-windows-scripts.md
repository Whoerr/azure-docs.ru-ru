---
title: Сценарии PowerShell для Azure IoT Edge для Linux в Windows | Документация Майкрософт
description: Справочные сведения по Azure IoT Edge для Linux в сценариях Windows PowerShell для развертывания, инициализации и IoT Edge состояния для Linux на виртуальных машинах Windows.
author: v-tcassi
manager: philmea
ms.author: v-tcassi
ms.date: 02/16/2021
ms.topic: reference
ms.service: iot-edge
services: iot-edge
ms.openlocfilehash: f0af571f67862c91371b01bee6227d5fb6b291be
ms.sourcegitcommit: c27a20b278f2ac758447418ea4c8c61e27927d6a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101747221"
---
# <a name="powershell-scripts-for-iot-edge-for-linux-on-windows"></a>Сценарии PowerShell для IoT Edge для Linux в Windows

Ознакомьтесь с сценариями PowerShell, которые развертывают, подготавливают и получают сведения о состоянии IoT Edge для Linux на виртуальной машине Windows.

Команды, описанные в этой статье, относятся к `AzureEFLOW.psm1` файлу, который можно найти в вашей системе в `WindowsPowerShell` каталоге `C:\Program Files\WindowsPowerShellModules\AzureEFLOW` .

## <a name="deploy-eflow"></a>Deploy-Eflow

Команда **deploy-ефлов** является основным методом развертывания. Команда развертывания создает виртуальную машину, подготавливает файлы и развертывает модуль агента IoT Edge. Хотя ни один из параметров не требуется, их можно использовать для подготовки устройства IoT Edge во время развертывания и изменения параметров виртуальной машины во время создания. Для полного списка используйте команду `Get-Help Deploy-Eflow -full` .  

>[!NOTE]
>Для типа подготовки **x509** в настоящее время относится только к подготовке x509 с помощью [службы подготовки устройств для центра Интернета вещей Azure](../iot-dps/about-iot-dps.md). В настоящее время метод подготовки X509 вручную не поддерживается.

| Параметр | Допустимые значения | Комментарии |
| --------- | --------------- | -------- |
| ефловвхдксдир | Путь к каталогу. | Каталог, в котором развертывание сохраняет VHDX-файл для виртуальной машины. |
| provisioningType | **вручную**, **TPM**, **X509** или **симметричное** |  Определяет тип подготовки, которую вы хотите использовать для устройства IoT Edge. |
| девконнстринг | Строка подключения устройства существующего IoT Edge устройства | Строка подключения устройства для ручной подготовки IoT Edge устройства (**вручную**). |
| симмкэй | Первичный ключ существующей регистрации DPS или первичного ключа существующего IoT Edge устройства, зарегистрированного с помощью симметричных ключей | Симметричный ключ для подготовки устройства IoT Edge (**X509** или **симметричного**). |
| scopeId | Идентификатор области для существующего экземпляра DP. | Идентификатор области для подготовки устройства IoT Edge (**X509** или **симметричного**). |
| registrationId | ИДЕНТИФИКАТОР регистрации существующего устройства IoT Edge | ИДЕНТИФИКАТОР регистрации для подготовки устройства IoT Edge (**X509** или **симметричного**). |
| идентитицертлоквм | Путь к каталогу; должен находиться в папке, которой может принадлежать `iotedge` Служба | Абсолютный путь назначения сертификата удостоверения на виртуальной машине для подготовки устройства IoT Edge (**X509** или **симметричного**). |
| идентитицертлоквин | Путь к каталогу. | Абсолютный исходный путь сертификата удостоверения в Windows для подготовки устройства IoT Edge (**X509** или **симметричного**). |
| идентитипклоквм |  | Путь к каталогу; должен находиться в папке, которой может принадлежать `iotedge` Служба | Абсолютный целевой путь к закрытому ключу удостоверения на виртуальной машине для подготовки устройства IoT Edge (**X509** или **симметричного**). |
| идентитипклоквин | Путь к каталогу. | Абсолютный исходный путь к закрытому ключу удостоверения в Windows для подготовки устройства IoT Edge (**X509** или **симметричного**). |
| вмсизедефинтион | Не более 30 символов | Определение количества ядер и доступной оперативной памяти для виртуальной машины. **Значение по умолчанию**: Standard_K8S_v1. |
| вмдисксизе | От 8 ГБ до 256 ГБ | Максимальный размер диска динамически расширяющегося виртуального жесткого диска. **Значение по умолчанию**: 16 ГБ. |
| вмусер | Не более 30 символов | Имя пользователя для входа на виртуальную машину. |
| внеттипе | **Прозрачный** или **ICS** | Тип виртуального коммутатора. **Значение по умолчанию**: Transparent. |
| vnetName | Не более 64 символов | Имя виртуального коммутатора. **Значение по умолчанию**: External. |
| енаблевтпм | Нет | **Параметр Switch**. Создайте виртуальную машину с включенным или отключенным доверенным платформенным модулем. |
| мобипаккажеверсион | Не более 30 символов |  Версия пакета значок Кита, который будет проверен или установлен на виртуальной машине.  **Значение по умолчанию:** 19.03.11. |
| иотеджепаккажеверсион | Не более 30 символов | Версия пакета IoT Edge, который будет проверен или установлен на виртуальной машине. **Значение по умолчанию:** 1.1.0. |
| инсталлпаккажес | Нет | **Параметр Switch**. При переключении Скрипт попытается установить пакеты значок Кита и IoT Edge, а не только проверяет наличие пакетов. |

## <a name="verify-eflowvm"></a>Verify-EflowVm

Команда **Verify-ефловвм** представляет собой предоставленную функцию, которая проверяет, была ли создана IOT Edge для Linux на виртуальной машине Windows. Он принимает только общие параметры и возвращает **значение true** , если виртуальная машина создана, и **значение false** в противном случае. Для получения дополнительных сведений используйте команду `Get-Help Verify-EflowVm -full` .

## <a name="provision-eflowvm"></a>Provision-EflowVm

Команда **подготовить-ефловвм** добавляет сведения об инициализации для устройства IOT EDGE в файл IOT Edge виртуальной машины `config.yaml` . Подготовка также может быть выполнена на этапе развертывания путем настройки параметров в команде **deploy-ефлов** . Для получения дополнительных сведений используйте команду `Get-Help Provision-EflowVm -full` .

| Параметр | Допустимые значения | Комментарии |
| --------- | --------------- | -------- |
| вмусер | Не более 30 символов | Имя пользователя для входа на виртуальную машину. |
| provisioningType | **вручную**, **TPM**, **X509** или **симметричное** |  Определяет тип подготовки, которую вы хотите использовать для устройства IoT Edge. |
| девконнстринг | Строка подключения устройства существующего IoT Edge устройства | Строка подключения устройства для ручной подготовки IoT Edge устройства (**вручную**). |
| симмкэй | Первичный ключ существующей регистрации DPS или первичного ключа существующего IoT Edge устройства, зарегистрированного с помощью симметричных ключей | Симметричный ключ для подготовки устройства IoT Edge (**DPS**, **симметричное**). |
| scopeId | Идентификатор области для существующего экземпляра DP. | Идентификатор области для подготовки устройства IoT Edge (**DPS**). |
| registrationId | ИДЕНТИФИКАТОР регистрации существующего устройства IoT Edge | ИДЕНТИФИКАТОР регистрации для подготовки устройства IoT Edge (**DPS**). |
| идентитицертлоквм | Путь к каталогу; должен находиться в папке, которой может принадлежать `iotedge` Служба | Абсолютный путь назначения сертификата удостоверения на виртуальной машине для подготовки устройства IoT Edge (**DPS**, **X509**). |
| идентитицертлоквин | Путь к каталогу. | Абсолютный исходный путь сертификата удостоверения в Windows для подготовки устройства IoT Edge (**DPS**, **X509**). |
| идентитипклоквм |  | Путь к каталогу; должен находиться в папке, которой может принадлежать `iotedge` Служба | Абсолютный целевой путь к закрытому ключу удостоверения на виртуальной машине для подготовки устройства IoT Edge (**DPS**, **X509**). |
| идентитипклоквин | Путь к каталогу. | Абсолютный исходный путь к закрытому ключу удостоверения в Windows для подготовки устройства IoT Edge (**DPS**, **X509**). |

## <a name="get-eflowvmname"></a>Get-EflowVmName

Команда **Get-ефловвмнаме** используется для запроса текущего имени узла виртуальной машины. Эта команда используется для учета того факта, что имя узла Windows может изменяться со временем. Он принимает только общие параметры и возвращает текущее имя узла виртуальной машины. Для получения дополнительных сведений используйте команду `Get-Help Get-EflowVmName -full` .

## <a name="get-eflowlogs"></a>Get-EflowLogs

Команда **Get-ефловлогс** используется для получения и объединения журналов из IOT Edge для развертывания Linux в Windows. Он выводит Объединенные журналы в виде `.zip` папки. Для получения дополнительных сведений используйте команду `Get-Help Get-EflowLogs -full` .

| Параметр | Допустимые значения | Комментарии |
| --------- | --------------- | -------- |
| вмусер | Не более 30 символов | Имя пользователя для входа на виртуальную машину. |

## <a name="get-eflowvmtpmprovisioninginfo"></a>Get-EflowVmTpmProvisioningInfo

Команда **Get-ефловвмтпмпровисионингинфо** используется для получения и просмотра сведений о подготовке vTPM виртуальной машины. Если виртуальная машина создана без vTPM, команда вернет, что ей не удалось найти сведения о подготовке TPM. Для получения дополнительных сведений используйте команду `Get-Help Get-EflowVmTpmProvisioningInfo -full` .

| Параметр | Допустимые значения | Комментарии |
| --------- | --------------- | -------- |
| вмусер | Не более 30 символов | Имя пользователя для входа на виртуальную машину. |

## <a name="get-eflowvmaddr"></a>Get-EflowVmAddr

Команда **Get-ефловвмаддр** используется для поиска и просмотра IP-и MAC адресов виртуальной машины. Он принимает только общие параметры. Для получения дополнительных сведений используйте команду `Get-Help Get-EflowVmAddr -full` .

## <a name="get-eflowvmsysteminformation"></a>Get-EflowVmSystemInformation

Команда **Get-ефловвмсистеминформатион** используется для получения и просмотра сведений о системе виртуальной машины, например об использовании памяти и хранилища. Для получения дополнительных сведений используйте команду `Get-Help Get-EflowVmSystemInformation -full` .

| Параметр | Допустимые значения | Комментарии |
| --------- | --------------- | -------- |
| вмусер | Не более 30 символов | Имя пользователя для входа на виртуальную машину. |

## <a name="get-eflowvmedgeinformation"></a>Get-EflowVmEdgeInformation

Команда **Get-ефловвмеджеинформатион** используется для получения и вывода сведений о IOT Edge из виртуальной машины, например версии IOT EDGE, где работает виртуальная машина. Для получения дополнительных сведений используйте команду `Get-Help Get-EflowVmEdgeInformation -full` .

| Параметр | Допустимые значения | Комментарии |
| --------- | --------------- | -------- |
| вмусер | Не более 30 символов | Имя пользователя для входа на виртуальную машину. |

## <a name="get-eflowvmedgemodulelist"></a>Get-EflowVmEdgeModuleList

Команда **Get-ефловвмеджемодулелист** используется для запроса и вывода списка модулей IOT EDGE, выполняемых на виртуальной машине. Для получения дополнительных сведений используйте команду `Get-Help Get-EflowVmEdgeModuleList -full` .

| Параметр | Допустимые значения | Комментарии |
| --------- | --------------- | -------- |
| вмусер | Не более 30 символов | Имя пользователя для входа на виртуальную машину. |

## <a name="get-eflowvmedgestatus"></a>Get-EflowVmEdgeStatus

Команда **Get-ефловвмеджестатус** используется для запроса и вывода состояния среды выполнения IOT EDGE на виртуальной машине. Для получения дополнительных сведений используйте команду `Get-Help Get-EflowVmEdgeStatus -full` .

| Параметр | Допустимые значения | Комментарии |
| --------- | --------------- | -------- |
| вмусер | Не более 30 символов | Имя пользователя для входа на виртуальную машину. |

## <a name="get-eflowvmusername"></a>Get-EflowVmUserName

Команда **Get-ефловвмусернаме** используется для запроса и вывода имени пользователя виртуальной машины, который использовался для создания виртуальной машины из реестра. Он принимает только общие параметры. Для получения дополнительных сведений используйте команду `Get-Help Get-EflowVmUserName -full` .

## <a name="get-eflowvmsshkey"></a>Get-EflowVmSshKey

Команда **Get-ефловвмсшкэй** используется для запроса и вывода ключа SSH, используемого виртуальной машиной. Он принимает только общие параметры. Для получения дополнительных сведений используйте команду `Get-Help Get-EflowVmSshKey -full` .

## <a name="ssh-eflowvm"></a>Ssh-EflowVm

Команда **SSH-ефловвм** используется для подключения к виртуальной машине по протоколу SSH. Для получения дополнительных сведений используйте команду `Get-Help Ssh-EflowVm -full` .

| Параметр | Допустимые значения | Комментарии |
| --------- | --------------- | -------- |
| вмусер | Не более 30 символов | Имя пользователя для входа на виртуальную машину. |

## <a name="next-steps"></a>Дальнейшие действия

Сведения об использовании этих команд см. в следующей статье:

* [Установка Azure IoT Edge для Linux в Windows](how-to-install-iot-edge-windows.md)

* Все команды, доступные в PowerShell, см. в [справочнике по сценариям для Linux в Windows powershell IOT Edge](reference-iot-edge-for-linux-on-windows-scripts.md#Deploy-Eflow) .

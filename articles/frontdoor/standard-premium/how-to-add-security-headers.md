---
title: Настройка заголовков безопасности с помощью набора правил "Стандартный" или "Премиум" (Предварительная версия) передней дверцы Azure
description: В этой статье приводятся рекомендации по использованию набора правил для настройки заголовков безопасности.
services: frontdoor
author: duongau
ms.service: frontdoor
ms.topic: how-to
ms.date: 02/18/2021
ms.author: yuajia
ms.openlocfilehash: c08ba57f43969bb2f0ee9c66b6cb4e92879ed258
ms.sourcegitcommit: 97c48e630ec22edc12a0f8e4e592d1676323d7b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/18/2021
ms.locfileid: "101099903"
---
# <a name="configure-security-headers-with-azure-front-door-standardpremium-preview-rule-set"></a>Настройка заголовков безопасности с помощью набора правил "Стандартный" или "Премиум" (Предварительная версия) передней дверцы Azure

> [!Note]
> Эта документация предназначена для передней дверцы Azure уровня "Стандартный" или "Премиум" (Предварительная версия). Ищете информацию о передней дверце Azure? Просмотреть [здесь](../front-door-overview.md).

В этой статье показано, как реализовать заголовки безопасности, чтобы предотвратить возникновение уязвимостей в браузере, таких как HTTP-протоколы, HTTPS-Security, Content-Security-Policy или X-Frame-Options. Атрибуты для системы безопасности можно также определять с помощью файлов cookie.

В следующем примере показано, как добавить заголовок Content-Security-Policy во все входящие запросы, которые соответствуют пути в маршруте. В этом примере мы разрешим выполнение скриптов в приложении только с доверенного сайта **https://apiphany.portal.azure-api.net** .

> [!IMPORTANT]
> Передняя дверца Azure Standard/Premium (Предварительная версия) в настоящее время доступна в общедоступной предварительной версии.
> Эта предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендована для использования рабочей среде. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены.
> Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

## <a name="prerequisites"></a>Предварительные требования

* Прежде чем настраивать заголовки безопасности, необходимо сначала создать переднюю дверь. Дополнительные сведения см. в [кратком руководстве Создание профиля Front Door для высокодоступного глобального веб-приложения](create-front-door-portal.md).
* Узнайте, как [настроить набор правил](how-to-configure-rule-set.md) , если вы еще не использовали набор правил.

## <a name="add-a-content-security-policy-header-in-azure-portal"></a>Добавление заголовка Content-Security-Policy на портале Azure

1. Перейдите к профилю "Стандартный/Премиум" передней дверцы Azure и выберите **набор правил** в разделе " **Параметры".**

1. Выберите **Добавить** , чтобы добавить новый набор правил. Присвойте правилу **имя** , а затем укажите **имя** правила. Выберите **Добавить действие** , а затем щелкните **заголовок ответа**.

1. Присвойте оператору значение **append** , чтобы добавить этот заголовок как ответ на все входящие запросы для этого маршрута.

1. Добавьте имя заголовка **Content-Security-Policy** и определите значения, которые будет принимать этот заголовок. В этом сценарии мы выбираем *«script-src https://apiphany.portal.azure-api.net » Self*».

1. После добавления всех правил, которые вы хотите настроить, не забудьте связать набор правил с маршрутом. Этот шаг *необходим* для того, чтобы набор правил вступил в действие. 

> [!NOTE]
> В нашем примере к правилу не добавляются [условия соответствия](concept-rule-set-match-conditions.md). Это правило будет применяться ко всем входящим запросам, соответствующим пути, определенному в связанном маршруте. Если вы хотите применять его к некоторому подмножеству этих запросов, добавьте нужные **условия соответствия** в это правило.

## <a name="clean-up-resources"></a>Очистка ресурсов

### <a name="deleting-a-rule"></a>Удаление правила

На предыдущих шагах вы настроили заголовок Content-Security-Policy с набором правил. Если правило больше не требуется, можно выбрать имя набора правил, а затем нажать кнопку Удалить правило. 

### <a name="deleting-a-rule-set"></a>Удаление набора правил

Если вы хотите удалить набор правил, убедитесь, что он не связан со всеми маршрутами перед удалением. Подробные инструкции по удалению набора правил см. в разделе [Настройка набора правил](how-to-configure-rule-set.md).

## <a name="next-steps"></a>Следующие шаги

Сведения о настройке брандмауэра веб-приложения для передней дверцы см. в разделе [брандмауэр веб-приложения и передняя дверца](../../web-application-firewall/afds/afds-overview.md).

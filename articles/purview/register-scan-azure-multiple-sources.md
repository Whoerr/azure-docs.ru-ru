---
title: Проверка нескольких источников Azure
description: Узнайте, как проверить всю подписку Azure или группу ресурсов в каталоге данных Azure зрения.
author: viseshag
ms.author: viseshag
ms.service: purview
ms.subservice: purview-data-catalog
ms.topic: how-to
ms.date: 2/26/2021
ms.openlocfilehash: c57ac9ddbebcf02cb0118705b63f97fd1880b0f2
ms.sourcegitcommit: c27a20b278f2ac758447418ea4c8c61e27927d6a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101696021"
---
# <a name="register-and-scan-azure-multiple-sources"></a>Регистрация и проверка нескольких источников Azure

В этой статье описано, как зарегистрировать несколько источников Azure (подписки Azure или группы ресурсов) в зрения и настроить на нем проверку.

## <a name="supported-capabilities"></a>Поддерживаемые возможности

Azure Multiple Source поддерживает проверки для записи метаданных и схемы в большинстве типов ресурсов Azure, поддерживаемых зрения. Он также классифицирует данные автоматически на основе системных и пользовательских правил классификации.

## <a name="prerequisites"></a>Предварительные требования

- Перед регистрацией источников данных создайте учетную запись Azure зрения. Дополнительные сведения о создании учетной записи зрения см. в разделе [Краткое руководство. Создание учетной записи Azure зрения](create-catalog-portal.md).
- Необходимо быть администратором источника данных Azure зрения.
- Настройка проверки подлинности, как описано в следующих разделах.

### <a name="setting-up-authentication-for-enumerating-resources-under-a-subscription-or-resource-group"></a>Настройка проверки подлинности для перечисления ресурсов в подписке или группе ресурсов

1. Перейдите к подписке или группе ресурсов в портал Azure.  
1. Выберите **Управление доступом (IAM)**   в меню навигации слева. 
1. Чтобы добавить роль в подписку или группу ресурсов, необходимо быть администратором владельца или администратора доступа пользователей. Нажмите кнопку *+ Добавить* . 
1. Задайте роль **читатель** и введите имя учетной записи Azure зрения (которая представляет ее MSI) в поле Выберите вход. Нажмите кнопку *сохранить* , чтобы завершить назначение роли.

### <a name="setting-up-authentication-to-scan-resources-under-a-subscription-or-resource-group"></a>Настройка проверки подлинности для сканирования ресурсов в подписке или группе ресурсов

Существует два способа настройки проверки подлинности для нескольких источников Azure.

- Управляемое удостоверение
- Субъект-служба

> [!NOTE]
> Необходимо настроить проверку подлинности для каждого ресурса в подписке или группе ресурсов, которые планируется зарегистрировать и проверить. Типы ресурсов службы хранилища Azure (хранилище BLOB-объектов Azure и Azure Data Lake Storage 2-го поколения) упрощают, позволяя добавлять MSI или субъект службы на уровне подписки или группы ресурсов в качестве модуля чтения больших двоичных объектов хранилища. Затем разрешения тонкого в каждую учетную запись хранения в рамках этой подписки или группы ресурсов. Для всех остальных типов ресурсов необходимо применить MSI-или субъект-службу для каждого ресурса или для этого устройства создать сценарий. Вот как можно добавить разрешения для каждого типа ресурсов в подписке или группе ресурсов.
    
- [Хранилище BLOB-объектов Azure](register-scan-azure-blob-storage-source.md#setting-up-authentication-for-a-scan)
- [Azure Data Lake Storage 1-го поколения](register-scan-adls-gen1.md#setting-up-authentication-for-a-scan)
- [Azure Data Lake Storage 2-го поколения](register-scan-adls-gen2.md#setting-up-authentication-for-a-scan)
- [База данных SQL Azure](register-scan-azure-sql-database.md)
- [Управляемый экземпляр Базы данных SQL Azure](register-scan-azure-sql-database-managed-instance.md#setting-up-authentication-for-a-scan)
- [Azure Synapse Analytics](register-scan-azure-synapse-analytics.md#setting-up-authentication-for-a-scan)
 
## <a name="register-an-azure-multiple-source"></a>Регистрация нескольких источников Azure

Чтобы зарегистрировать новый источник Azure в каталоге данных, выполните следующие действия.

1. Перейдите к учетной записи Purview.
1. В области навигации слева выберите **Источники**.
1. Нажмите кнопку **Зарегистрировать**.
1. В меню **Регистрация источников** выберите **Azure (несколько)** .
1. Выберите **Продолжить**

   :::image type="content" source="media/register-scan-azure-multiple-sources/register-azure-multiple.png" alt-text="Регистрация нескольких источников Azure":::

На экране **Регистрация источников (Azure Multiple)** выполните следующие действия.

1. Введите **имя** , в котором будет указан источник данных в каталоге. 
1. При необходимости выберите **группу управления** для фильтрации
1. **Выберите подписку или определенную группу ресурсов** в заданной подписке в раскрывающемся списке. Для области регистрации будет задана выбранная подписка или группа ресурсов.  
1. Выберите или создайте новую **коллекцию** (необязательно)
1. **Готово** к регистрации источника данных

   :::image type="content" source="media/register-scan-azure-multiple-sources/azure-multiple-source-setup.png" alt-text="Настройка нескольких источников Azure":::

## <a name="creating-and-running-a-scan"></a>Создание и выполнение проверки

Для создания и выполнения новой проверки сделайте следующее:

1. Переход к разделу " **источники** "

1. Выберите зарегистрированный источник данных

1. Щелкните "просмотреть сведения" и выберите **+ создать сканирование** или используйте значок быстрого действия "проверить" на плитке источника.

1. Заполните поля *имя* и выберите все типы ресурсов, которые вы хотите проверить в этом источнике.

    1. Вы можете оставить его как *все* (сюда относятся будущие типы ресурсов, которые в настоящее время не существуют в этой подписке или группе ресурсов).
    1. Можно **выбрать типы ресурсов** , которые необходимо проверить. Если выбрать этот вариант, будущие типы ресурсов, которые могут быть созданы в этой подписке или группе ресурсов, не будут включаться для проверок, если только проверка не будет явно изменена в будущем.
    
    :::image type="content" source="media/register-scan-azure-multiple-sources/multiple-source-scan.png" alt-text="Проверка нескольких источников Azure":::

1. Выберите учетные данные для подключения к ресурсам в источнике данных. 
    1. Вы можете выбрать **учетные данные на родительском уровне** как MSI или конкретный тип субъекта-службы, который можно выбрать для всех типов ресурсов в подписке или группе ресурсов.
    1. Можно также **выбрать тип ресурса и применить другие учетные данные** для этого типа ресурса.
    1. Каждый из этих учетных данных будет рассматриваться как метод проверки подлинности для всех ресурсов в определенном типе.
    1. Необходимо задать выбранные учетные данные для ресурсов, чтобы успешно проверить их, как описано в этом [разделе](#Setting-up-authentication-to-scan-resources-under-a-subscription-or-resource-group) выше.
1. В каждом типе можно выбрать либо сканирование всех ресурсов, либо их подмножество по имени.
    1. Если оставить этот параметр, **все** будущие ресурсы этого типа будут также проверяться в будущих запусках сканирования.
    1. При выборе конкретных учетных записей хранения или баз данных SQL будущие ресурсы, созданные для этого типа в этой подписке или группе ресурсов, не будут включаться для проверок, если только проверка не будет явно изменена в будущем.
 
1.  Нажмите кнопку **Продолжить**. Мы протестируем доступ, чтобы проверить, применен ли MSI зрения в качестве читателя в подписке или группе ресурсов. Если выдается сообщение об ошибке, следуйте указаниям [здесь](#Setting-up-authentication-for-enumerating-resources-under-a-subscription-or-resource-group) .

1.  Выберите **проверить наборы правил** для каждого типа ресурсов, выбранного на предыдущем шаге. Вы также можете создать встроенные наборы правил проверки.
  :::image type="content" source="media/register-scan-azure-multiple-sources/multiple-scan-rule-set.png" alt-text="Выбор набора правил для нескольких проверок Azure":::

1. Выберите триггер проверки. Вы можете запланировать его выполнение **еженедельно или ежемесячно** или **один раз**

1. Просмотрите результаты проверки и нажмите кнопку Сохранить, чтобы завершить настройку.   

## <a name="viewing-your-scans-and-scan-runs"></a>Просмотр данных о проверках и их выполнении

1. Просмотрите сведения об источнике, щелкнув элемент **Просмотр сведений** на плитке в разделе источники. 

      :::image type="content" source="media/register-scan-azure-multiple-sources/multiple-source-detail.png" alt-text="Сведения о нескольких источниках Azure"::: 

1. Просмотрите сведения о выполнении сканирования, перейдя на страницу **сведений о сканировании** .
    1. *Строка состояния* представляет собой краткую сводку о состоянии выполнения дочерних ресурсов. Он будет отображаться на уровне подписки или группы ресурсов.
    1. Зеленый цвет означает успех, а красный — сбой. Серый цвет означает, что проверка выполняется
    1. Можно щелкнуть каждую проверку, чтобы просмотреть более детализированные сведения.

      :::image type="content" source="media/register-scan-azure-multiple-sources/multiple-scan-full-details.png" alt-text="Сведения о множественном сканировании Azure":::

1. Просмотрите сводку последних неудачных выполнений сканирования в нижней части страницы сведений об источнике. Вы также можете щелкнуть здесь, чтобы просмотреть более детализированные сведения, относящиеся к этим запускам.

## <a name="manage-your-scans---edit-delete-or-cancel"></a>Управление проверкой: изменение, удаление и отмена
Для управления проверкой или ее удаления сделайте следующее:

- Перейдите в центр управления. Выберите источники данных в разделе источники и сканирование, а затем выберите нужный источник данных.

- Выберите нужную проверку. Вы можете изменить проверку, нажав кнопку Изменить.

- Вы можете удалить проверку, выбрав Удалить.
- Если сканирование выполняется, можно также отменить его.

## <a name="next-steps"></a>Дальнейшие действия

- [Обзор каталога данных Azure Purview](how-to-browse-catalog.md)
- [Поиск по каталогу данных Azure Purview](how-to-search-catalog.md)    
